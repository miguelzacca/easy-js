"use strict";const t=document.currentScript.getAttribute("data-url");function o(t){const o=document.createElement("dialog");o.id="result-dialog";const n=document.createElement("button");Object.assign(n,{textContent:"Close",onclick:()=>{o.remove()}});const e=document.createElement("div");e.appendChild(t),o.appendChild(e),o.appendChild(n),document.body.appendChild(o),o.showModal()}function n(t){const o=Object.keys(t),n=t[o[0]];if("string"==typeof n&&1===o.length)return n}function e(t){const e="object"==typeof t,s=e&&n(t);s?c(s):e?function(t){const n=document.createElement("table"),e=document.createElement("thead"),c=document.createElement("tbody"),s=Object.keys(t[0]),r=document.createElement("tr");for(const t of s){const o=document.createElement("th");o.textContent=t,r.appendChild(o)}e.appendChild(r);for(const o of t){const t=Object.values(o),n=document.createElement("tr");for(const o of t){const t=document.createElement("td");t.textContent=o,n.appendChild(t)}c.appendChild(n)}n.appendChild(e),n.appendChild(c),o(n)}(Array.isArray(t)?t:[t]):c(t)}function c(t){if(!t)return;const n=document.createElement("p");Object.assign(n,{id:"result-text",textContent:t}),o(n)}function s(t){const o=t.filter((([t,o])=>t.includes("_param")&&o));let n="";for(const[t,e]of o)n+=`/${e}`;return n}function r(t){const o=t.filter((([t,o])=>t.includes("_query")&&o));let n=o.length>0?"?":"";for(const[t,e]of o){const o=t.split("_")[2];n+=`${n.length>1?"&":""}${o}=${e}`}return n}function u({t:s,o:r,u:u,i:d}){const{m:f,l:i}=u,a=i||d,m=f||"",l=function(t){for(const o in t)"_"!==o[0]&&t[o]||delete t[o];return t}(u),b="get"!==a.toLowerCase()?{method:a,headers:{p:"application/json"},body:JSON.stringify(l)}:void 0;fetch(`${t}${m}${s}${r}`,b).then((t=>t.ok?t.json():async function(t){const{status:e,statusText:c}=t,s=await t.json().catch(console.error),r="string"==typeof s?s:"object"==typeof s&&n(s),u=document.createElement("div");u.id="error-result";const d=document.createElement("h2");d.textContent=String(e);const f=document.createElement("p");throw f.textContent=r||c,u.appendChild(d),u.appendChild(f),o(u),t}(t))).then(e).catch((t=>c(t.message)))}!function(){const t=document.createElement("link");Object.assign(t,{rel:"stylesheet",href:"https://easy-js.netlify.app/assets/lib/easy-form.css"}),document.head.prepend(t)}(),addEventListener("DOMContentLoaded",(function(){if(!t){const t="Atributo data-url faltando na tag script";throw c(t),new Error(t)}for(const t of document.querySelectorAll("form"))t.addEventListener("submit",(o=>{o.preventDefault();const n=[...new FormData(t).entries()];u({t:s(n),o:r(n),u:Object.fromEntries(n),i:t.method})}))}));