"use strict";const t=document.currentScript.getAttribute("data-url");function e(t){const e=document.createElement("dialog");e.id="result-dialog";const n=document.createElement("button");Object.assign(n,{textContent:"Close",onclick:()=>{e.remove()}});const o=document.createElement("div");o.appendChild(t),e.appendChild(o),e.appendChild(n),document.body.appendChild(e),e.showModal()}function n(t){const e=Object.keys(t),n=t[e[0]];if("string"==typeof n&&1===e.length)return n}function o(t){const o="object"==typeof t,r=o&&n(t);r?c(r):o?function(t){const n=document.createElement("table"),o=document.createElement("thead"),c=document.createElement("tbody"),r=Object.keys(t[0]),s=document.createElement("tr");for(const t of r){const e=document.createElement("th");e.textContent=t,s.appendChild(e)}o.appendChild(s);for(const e of t){const t=Object.values(e),n=document.createElement("tr");for(const e of t){const t=document.createElement("td");t.textContent=e,n.appendChild(t)}c.appendChild(n)}n.appendChild(o),n.appendChild(c),e(n)}(Array.isArray(t)?t:[t]):c(t)}function c(t){if(!t)return;const n=document.createElement("p");Object.assign(n,{id:"result-text",textContent:t}),e(n)}function r(t){const e=t.filter((([t,e])=>t.includes("_param")&&e));let n="";for(const[t,o]of e)n+=`/${o}`;return n}function s(t){const e=t.filter((([t,e])=>t.includes("_query")&&e));let n=e.length>0?"?":"";for(const[t,o]of e){const e=t.split("_")[2];n+=`${n.length>1?"&":""}${e}=${o}`}return n}function d({params:r,queries:s,formObj:d,stdMethod:a}){const{_endpoint:i,_method:l}=d,u=l||a,m=i||"",p=function(t){for(const e in t)"_"!==e[0]&&t[e]||delete t[e];return t}(d),f="get"!==u.toLowerCase()?{method:u,headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}:void 0;fetch(`${t}${m}${r}${s}`,f).then((t=>t.ok?t.json():async function(t){const{status:o,statusText:c}=t,r=await t.json().catch(console.error),s="string"==typeof r?r:"object"==typeof r&&n(r),d=document.createElement("div");d.id="error-result";const a=document.createElement("h2");a.textContent=String(o);const i=document.createElement("p");throw i.textContent=s||c,d.appendChild(a),d.appendChild(i),e(d),t}(t))).then(o).catch((t=>c(t.message)))}!function(){const t=document.createElement("link");Object.assign(t,{rel:"stylesheet",href:"https://easy-js.netlify.app/assets/lib/easy-form.css"}),document.head.prepend(t)}(),addEventListener("DOMContentLoaded",(function(){if(!t){const t="Atributo data-url faltando na tag script";throw c(t),new Error(t)}for(const t of document.querySelectorAll("form"))t.addEventListener("submit",(e=>{e.preventDefault();const n=[...new FormData(t).entries()];d({params:r(n),queries:s(n),formObj:Object.fromEntries(n),stdMethod:t.method})}))}));